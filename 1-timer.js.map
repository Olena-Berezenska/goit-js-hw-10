{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst refs = {\n  DateInput: document.querySelector('#datetime-picker'),\n  StartBtn: document.querySelector('[data-start]'),\n  ClockFace: document.querySelector('.timer'),\n};\n\nrefs.StartBtn.disabled = true;\nconst timer = {\n  intervalId: null,\n  userSelectedDate: null,\n  selectData() {\n    const options = {\n      enableTime: true,\n      defaultDate: new Date(),\n      time_24hr: true,\n      minuteIncrement: 1,\n      onClose(selectedDates) {\n        if (selectedDates.length === 0) return;\n        if (selectedDates[0] <= Date.now()) {\n          iziToast.error({\n            title: 'Hey',\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n          });\n          refs.StartBtn.disabled = true;\n        } else {\n          timer.userSelectedDate = selectedDates[0];\n          console.log('Selected date:', this.userSelectedDate);\n          refs.StartBtn.disabled = false;\n        }\n      },\n    };\n    const fp = flatpickr(refs.DateInput, options);\n  },\n\n  start() {\n    console.log('Start');\n    this.intervalId = setInterval(() => {\n      this.tick();\n    }, 1000);\n    refs.StartBtn.disabled = true;\n    // refs.DateInput._flatpickr.destroy();\n    refs.DateInput.disabled = true;\n  },\n\n  tick() {\n    const currentTime = Date.now();\n    // console.log(currentTime);\n    // console.log(this.userSelectedDate.getTime());\n    const diff = this.userSelectedDate.getTime() - currentTime;\n    if (diff <= 0) {\n      this.stop();\n      return;\n    }\n    const time = convertMs(diff);\n    const objInFormat = timeToFormat(time);\n    console.log(objInFormat);\n    Object.entries(objInFormat).forEach(([key, value]) => {\n      const element = refs.ClockFace.querySelector(`[data-${key}]`);\n      if (element) {\n        element.textContent = value;\n      }\n    });\n  },\n  stop() {\n    clearInterval(this.intervalId);\n    refs.DateInput.disabled = false;\n  },\n};\n\ntimer.selectData();\n\nrefs.StartBtn.addEventListener('click', () => {\n  timer.start();\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction timeToFormat({ days, hours, minutes, seconds }) {\n  days =\n    days > 99\n      ? days.toString().padStart(3, '0')\n      : days.toString().padStart(2, '0');\n  hours = hours.toString().padStart(2, '0');\n  minutes = minutes.toString().padStart(2, '0');\n  seconds = seconds.toString().padStart(2, '0');\n  return { days, hours, minutes, seconds };\n}\n"],"names":["refs","timer","options","selectedDates","iziToast","flatpickr","currentTime","diff","time","convertMs","objInFormat","timeToFormat","key","value","element","ms","days","hours","minutes","seconds"],"mappings":"+IAIA,MAAMA,EAAO,CACX,UAAW,SAAS,cAAc,kBAAkB,EACpD,SAAU,SAAS,cAAc,cAAc,EAC/C,UAAW,SAAS,cAAc,QAAQ,CAC5C,EAEAA,EAAK,SAAS,SAAW,GACzB,MAAMC,EAAQ,CACZ,WAAY,KACZ,iBAAkB,KAClB,YAAa,CACX,MAAMC,EAAU,CACd,WAAY,GACZ,YAAa,IAAI,KACjB,UAAW,GACX,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,SAAW,IACzBA,EAAc,CAAC,GAAK,KAAK,IAAG,GAC9BC,EAAS,MAAM,CACb,MAAO,MACP,QAAS,qCACT,SAAU,UACtB,CAAW,EACDJ,EAAK,SAAS,SAAW,KAEzBC,EAAM,iBAAmBE,EAAc,CAAC,EACxC,QAAQ,IAAI,iBAAkB,KAAK,gBAAgB,EACnDH,EAAK,SAAS,SAAW,IAE5B,CACP,EACeK,EAAUL,EAAK,UAAWE,CAAO,CAC7C,EAED,OAAQ,CACN,QAAQ,IAAI,OAAO,EACnB,KAAK,WAAa,YAAY,IAAM,CAClC,KAAK,KAAI,CACV,EAAE,GAAI,EACPF,EAAK,SAAS,SAAW,GAEzBA,EAAK,UAAU,SAAW,EAC3B,EAED,MAAO,CACL,MAAMM,EAAc,KAAK,MAGnBC,EAAO,KAAK,iBAAiB,QAAO,EAAKD,EAC/C,GAAIC,GAAQ,EAAG,CACb,KAAK,KAAI,EACT,MACD,CACD,MAAMC,EAAOC,EAAUF,CAAI,EACrBG,EAAcC,EAAaH,CAAI,EACrC,QAAQ,IAAIE,CAAW,EACvB,OAAO,QAAQA,CAAW,EAAE,QAAQ,CAAC,CAACE,EAAKC,CAAK,IAAM,CACpD,MAAMC,EAAUd,EAAK,UAAU,cAAc,SAASY,CAAG,GAAG,EACxDE,IACFA,EAAQ,YAAcD,EAE9B,CAAK,CACF,EACD,MAAO,CACL,cAAc,KAAK,UAAU,EAC7Bb,EAAK,UAAU,SAAW,EAC3B,CACH,EAEAC,EAAM,WAAU,EAEhBD,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5CC,EAAM,MAAK,CACb,CAAC,EAED,SAASQ,EAAUM,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASR,EAAa,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACvD,OAAAH,EACEA,EAAO,GACHA,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,EAC/BA,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,EACrCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}